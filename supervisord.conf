# Celery Worker Configuration for AI Video Automation

# Video Processing Worker
[program:video-worker]
command=python -m app.tasks.worker video-worker
directory=/app
user=celery
numprocs=1
stdout_logfile=/var/log/celery/video-worker.log
stderr_logfile=/var/log/celery/video-worker.log
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=600
killasgroup=true
priority=100

# AI Processing Worker  
[program:ai-worker]
command=python -m app.tasks.worker ai-worker
directory=/app
user=celery
numprocs=2
stdout_logfile=/var/log/celery/ai-worker.log
stderr_logfile=/var/log/celery/ai-worker.log
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=600
killasgroup=true
priority=200

# Publishing Worker
[program:publishing-worker]
command=python -m app.tasks.worker publishing-worker
directory=/app
user=celery
numprocs=1
stdout_logfile=/var/log/celery/publishing-worker.log
stderr_logfile=/var/log/celery/publishing-worker.log
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=600
killasgroup=true
priority=300

# General Purpose Worker
[program:general-worker]
command=python -m app.tasks.worker general-worker
directory=/app
user=celery
numprocs=1
stdout_logfile=/var/log/celery/general-worker.log
stderr_logfile=/var/log/celery/general-worker.log
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=600
killasgroup=true
priority=400

# Celery Beat Scheduler
[program:celery-beat]
command=python -m app.tasks.worker beat
directory=/app
user=celery
numprocs=1
stdout_logfile=/var/log/celery/beat.log
stderr_logfile=/var/log/celery/beat.log
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=30
killasgroup=true
priority=500

# Flower Monitoring Dashboard
[program:flower]
command=python -m app.tasks.worker flower
directory=/app
user=celery
numprocs=1
stdout_logfile=/var/log/celery/flower.log
stderr_logfile=/var/log/celery/flower.log
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=30
killasgroup=true
priority=600

[group:celery]
programs=video-worker,ai-worker,publishing-worker,general-worker,celery-beat,flower
priority=100